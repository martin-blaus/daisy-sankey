let expenses = [
    {
        "category": "Taxes",
        "subAccounts": [
            {
                "category": "Property Taxes",
                "annual": {
                    "actual": 175
                }
            },
            {
                "category": "Corporate Taxes",
                "annual": {
                    "actual": 0
                }
            }
        ],
        "annual": {
            "actual": 175
        }
    },
    {
        "category": "Utilities",
        "subAccounts": [
            {
                "category": "Electricity",
                "annual": {
                    "actual": 22994.9
                }
            },
            {
                "category": "Cable/ Satellite/Internet/Telephone",
                "annual": {
                    "actual": 1132.86
                }
            },
            {
                "category": "Water / Sewer",
                "annual": {
                    "actual": 6659.92
                }
            },
            {
                "category": "Gas",
                "annual": {
                    "actual": 14857.2
                }
            }
        ],
        "annual": {
            "actual": 45644.88
        }
    },
    {
        "category": "Administrative Expenses",
        "subAccounts": [
            {
                "category": "Credit Card Convenience Expense",
                "annual": {
                    "actual": 724.98
                }
            },
            {
                "category": "Office Supplies",
                "annual": {
                    "actual": 722.55
                }
            },
            {
                "category": "Other Administrative Expense",
                "annual": {
                    "actual": 886.05
                }
            },
            {
                "category": "Management Fees",
                "annual": {
                    "actual": 9888
                }
            },
            {
                "category": "Legal Fees",
                "annual": {
                    "actual": 4965.5
                }
            },
            {
                "category": "Accounting / Audit / Tax Services",
                "annual": {
                    "actual": 6500
                }
            },
            {
                "category": "Other Professional Fees",
                "annual": {
                    "actual": 726.4
                }
            },
            {
                "category": "Donation/Charitable Contributions",
                "annual": {
                    "actual": 500
                }
            },
            {
                "category": "Bank Fees",
                "annual": {
                    "actual": 179.39
                }
            }
        ],
        "annual": {
            "actual": 25092.87
        }
    },
    {
        "category": "Payroll Expenses",
        "subAccounts": [
            {
                "category": "Workers' Compensation, EPLI, & Disability",
                "annual": {
                    "actual": 3653.13
                }
            },
            {
                "category": "Employer Paid Taxes",
                "annual": {
                    "actual": 12678.45
                }
            },
            {
                "category": "Payroll Administration Fees",
                "annual": {
                    "actual": 4778.47
                }
            },
            {
                "category": "Wages",
                "annual": {
                    "actual": 125962.54
                }
            },
            {
                "category": "Independent Contract (e.g. 1099 Supers)",
                "annual": {
                    "actual": 2918
                }
            },
            {
                "category": "50960- Commissions & Bonuses",
                "annual": {
                    "actual": 0
                }
            }
        ],
        "annual": {
            "actual": 149990.59
        }
    },
    {
        "category": "Non-Recurring-  Repairs",
        "subAccounts": [
            {
                "category": "Plumbing Repairs",
                "annual": {
                    "actual": 13771
                }
            },
            {
                "category": "Repair Supplies",
                "annual": {
                    "actual": 130.64
                }
            },
            {
                "category": "Elevator Repairs",
                "annual": {
                    "actual": 1037.1
                }
            },
            {
                "category": "Electrical Repairs",
                "annual": {
                    "actual": 2250
                }
            },
            {
                "category": "Boiler & Water Tank Repairs",
                "annual": {
                    "actual": 7365.39
                }
            },
            {
                "category": "HVAC Repairs",
                "annual": {
                    "actual": 1633.13
                }
            },
            {
                "category": "Door & Lock Repairs",
                "annual": {
                    "actual": 0
                }
            },
            {
                "category": "60400- Intercom Repairs",
                "annual": {
                    "actual": 0
                }
            }
        ],
        "annual": {
            "actual": 26187.26
        }
    },
    {
        "category": "Building Operating Expenses",
        "subAccounts": [
            {
                "category": "Pest Control Services",
                "annual": {
                    "actual": 1561.28
                }
            },
            {
                "category": "Landscape Contract, Flowers, Plants",
                "annual": {
                    "actual": 8999.63
                }
            },
            {
                "category": "Fire Monitoring & Sprinkler System / Pumps",
                "annual": {
                    "actual": 1436.89
                }
            },
            {
                "category": "Elevator - Contract",
                "annual": {
                    "actual": 3337.52
                }
            },
            {
                "category": "HVAC & Cooling Tower Service Contract",
                "annual": {
                    "actual": 3209.09
                }
            },
            {
                "category": "52775 -Water Conditioning and Treatments",
                "annual": {
                    "actual": 4615.11
                }
            },
            {
                "category": "Intercom Service Contract",
                "annual": {
                    "actual": 544.38
                }
            },
            {
                "category": "Cleaning & General Maintenance Supplies",
                "annual": {
                    "actual": 2781.52
                }
            }
        ],
        "annual": {
            "actual": 26485.42
        }
    },
    {
        "category": "Projects & Capital Expenditures",
        "subAccounts": [
            {
                "category": "Engineer/Architect Expense",
                "annual": {
                    "actual": 3900
                }
            },
            {
                "category": "Capex",
                "annual": {
                    "actual": 0
                }
            }
        ],
        "annual": {
            "actual": 3900
        }
    },
    {
        "category": "Insurance",
        "subAccounts": [
            {
                "category": "Insurance",
                "annual": {
                    "actual": 15434.63
                }
            }
        ],
        "annual": {
            "actual": 15434.63
        }
    },
    {
        "category": "Compliance & Monitoring",
        "subAccounts": [
            {
                "category": "Penalties/Fines",
                "annual": {
                    "actual": 266
                }
            },
            {
                "category": "Plumbing Inspection",
                "annual": {
                    "actual": 599
                }
            },
            {
                "category": "Elevator Inspection & CAT 1/5 Test",
                "annual": {
                    "actual": 0
                }
            },
            {
                "category": "Fire Inspections",
                "annual": {
                    "actual": 0
                }
            }
        ],
        "annual": {
            "actual": 865
        }
    }
]



const mainKeys = expenses.map(d => {
    return ["Expenses", d.category, d.annual.actual]
});
const secondaryKeys = expenses.flatMap(d => d.subAccounts.map(sa => {
    return [d.category, sa.category, sa.annual.actual]
}));



let nodes = []
let links = []
let i = 1;
nodes.push({ node: 0, name: "expenses" })
for (const expense of expenses) {
    const node = { node: i, name: expense.category };
    const link = { source: 0, target: i, value: expense.annual.actual }
    nodes.push(node);
    links.push(links);
}

console.log()